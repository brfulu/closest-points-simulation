{"version":3,"sources":["js/closest-points.js","js/index.js"],"names":["ClosestPoints","points","minDistance","pointA","pointB","Number","MAX_VALUE","i","length","j","distance","_getDistance","events","sort","a","b","x","pointsOrderedByX","slice","y","pointsOrderedByY","_closestPair","childType","push","type","width","height","bruteResult","bruteForce","label","middleIndex","Math","floor","middlePoint","leftPoints","rightPoints","leftResult","rightResult","pointLeftA","pointLeftB","labelLeft","pointRightA","pointRightB","labelRight","combinedResult","strip","filter","point","abs","max","min","stripResult","_getMinimumDistanceStrip","totalResult","first","second","sqrt","pow","canvas","document","getElementById","ctx","getContext","pointSize","clearButton","nextButton","backButton","startButton","eventIndex","drawOnClick","event","rect","getBoundingClientRect","clientX","left","clientY","top","drawPoint","save","beginPath","arc","PI","fillStyle","fill","strokeStyle","lineWidth","stroke","restore","drawLine","moveTo","lineTo","forEach","p","drawLabel","text","p1","p2","padding","t","alignment","dx","dy","textAlign","font","translate","rotate","atan2","fillText","highlightPoint","color","highlightRect","fillRect","strokeRect","clearCanvas","clearRect","console","log","style","display","next","back","random","toString","start","closestPoints","result","divideAndConquer","addEventListener"],"mappings":"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","file":"js.b2bd64a5.map","sourceRoot":"..","sourcesContent":["export default class ClosestPoints {\r\n\r\n  constructor() { }\r\n\r\n  bruteForce(points) {\r\n    let minDistance = Number.MAX_VALUE;\r\n    let pointA, pointB;\r\n\r\n    for (let i = 0; i < points.length; i++) {\r\n      for (let j = i + 1; j < points.length; j++) {\r\n        let distance = this._getDistance(points[i], points[j]);\r\n        if (distance < minDistance) {\r\n          minDistance = distance;\r\n          pointA = points[i];\r\n          pointB = points[j];\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      distance: minDistance,\r\n      pointA,\r\n      pointB\r\n    };\r\n  }\r\n\r\n  divideAndConquer(points) {\r\n    this.events = []\r\n    this.points = points;\r\n\r\n    points.sort((a, b) => a.x - b.x);\r\n    this.pointsOrderedByX = points.slice();\r\n\r\n    points.sort((a, b) => a.y - b.y);\r\n    this.pointsOrderedByY = points.slice();\r\n\r\n    let result = this._closestPair(this.pointsOrderedByX);\r\n    return {\r\n      distance: result.distance,\r\n      events: this.events\r\n    };\r\n  }\r\n\r\n  _closestPair(points, childType) {\r\n    this.events.push({\r\n      type: 'highlightRect',\r\n      x: points[0].x - 6,\r\n      y: 0,\r\n      width: points[points.length - 1].x - points[0].x + 12,\r\n      height: 530\r\n    });\r\n\r\n    if (points.length <= 3) {\r\n      let bruteResult = this.bruteForce(points);\r\n      this.events.push({\r\n        type: 'drawLine',\r\n        pointA: bruteResult.pointA,\r\n        pointB: bruteResult.pointB,\r\n        label: 'd'\r\n      });\r\n      return bruteResult;\r\n    }\r\n\r\n    let middleIndex = Math.floor(points.length / 2);\r\n    let middlePoint = points[middleIndex];\r\n\r\n    let leftPoints = points.slice(0, middleIndex);\r\n    let rightPoints = points.slice(middleIndex);\r\n\r\n    let leftResult = this._closestPair(leftPoints, 'left');\r\n    let minDistanceLeft = leftResult.distance;\r\n\r\n    let rightResult = this._closestPair(rightPoints, 'right');\r\n    let minDistanceRight = rightResult.distance;\r\n\r\n    this.events.push({\r\n      type: 'highlightLeftRight',\r\n      x: points[0].x - 6,\r\n      y: 0,\r\n      width: points[points.length - 1].x - points[0].x + 12,\r\n      height: 530,\r\n      pointLeftA: leftResult.pointA,\r\n      pointLeftB: leftResult.pointB,\r\n      labelLeft: 'dl',\r\n      pointRightA: rightResult.pointA,\r\n      pointRightB: rightResult.pointB,\r\n      labelRight: 'dr'\r\n    });\r\n\r\n    let combinedResult = leftResult.distance < rightResult.distance ? leftResult : rightResult;\r\n\r\n    this.events.push({\r\n      type: 'combine',\r\n      x: points[0].x - 6,\r\n      y: 0,\r\n      width: points[points.length - 1].x - points[0].x + 12,\r\n      height: 530,\r\n      pointA: combinedResult.pointA,\r\n      pointB: combinedResult.pointB,\r\n      label: 'd'\r\n    });\r\n\r\n    let strip = this.pointsOrderedByY.filter(point => {\r\n      return Math.abs(point.x - middlePoint.x) <= combinedResult.distance\r\n        && point.x >= points[0].x\r\n        && point.x <= points[points.length - 1].x;\r\n    });\r\n\r\n\r\n    this.events.push({\r\n      type: 'highlightStrip',\r\n      x: Math.max(points[0].x - 6, middlePoint.x - combinedResult.distance - 6),\r\n      y: 0,\r\n      width: Math.min(points[points.length - 1].x - Math.max(points[0].x, middlePoint.x - combinedResult.distance - 6), 2 * combinedResult.distance + 12),\r\n      height: 530,\r\n      pointA: combinedResult.pointA,\r\n      pointB: combinedResult.pointB\r\n    });\r\n    let stripResult = this._getMinimumDistanceStrip(strip);\r\n\r\n    let totalResult = combinedResult.distance < stripResult.distance ? combinedResult : stripResult;\r\n    this.events.push({\r\n      type: (points.length == this.points.length ? 'highlightFinish' : 'highlightResult'),\r\n      x: points[0].x - 6,\r\n      y: 0,\r\n      width: points[points.length - 1].x - points[0].x + 12,\r\n      height: 530,\r\n      pointA: totalResult.pointA,\r\n      pointB: totalResult.pointB,\r\n      label: 'd'\r\n    });\r\n    return totalResult;\r\n  }\r\n\r\n  _getDistance(first, second) {\r\n    return Math.sqrt(Math.pow(first.x - second.x, 2) + Math.pow(first.y - second.y, 2));\r\n  }\r\n\r\n  _getMinimumDistanceStrip(strip) {\r\n    let minDistance = Number.MAX_VALUE;\r\n    let pointA, pointB;\r\n    for (let i = 0; i < strip.length; i++) {\r\n      for (let j = i + 1; j < strip.length && j - i <= 15; j++) {\r\n        if (this._getDistance(strip[i], strip[j]) < minDistance) {\r\n          minDistance = this._getDistance(strip[i], strip[j]);\r\n          pointA = strip[i];\r\n          pointB = strip[j];\r\n        }\r\n\r\n        this.events.push({\r\n          type: 'highlightPoints',\r\n          pointA: strip[i],\r\n          pointB: strip[j]\r\n        });\r\n      }\r\n    }\r\n    return {\r\n      distance: minDistance,\r\n      pointA,\r\n      pointB\r\n    };\r\n  }\r\n}\r\n","'use strict';\r\n\r\nimport ClosestPoints from './closest-points';\r\n\r\n// const testPoints = [{ x: 2, y: 3 }, { x: 12, y: 30 }, { x: 40, y: 50 }, { x: 5, y: 1 }, { x: 12, y: 10 }, { x: 3, y: 4 }];\r\n// const closestPoints = new ClosestPoints();\r\n// console.log(testPoints);\r\n// console.log(closestPoints.divideAndConquer(testPoints));\r\n// console.log(closestPoints.bruteForce(testPoints));\r\n\r\n// Drawing\r\n\r\nconst canvas = document.getElementById('canvas');\r\nconst ctx = canvas.getContext('2d');\r\nconst pointSize = 7;\r\n\r\nconst clearButton = document.getElementById('clear');\r\nconst nextButton = document.getElementById('next');\r\nconst backButton = document.getElementById('back');\r\nconst startButton = document.getElementById('start');\r\n\r\nlet points = [];\r\nlet eventIndex = -1;\r\nlet events = [];\r\n\r\nfunction drawOnClick(event) {\r\n  const rect = canvas.getBoundingClientRect();\r\n  const x = event.clientX - rect.left;\r\n  const y = event.clientY - rect.top;\r\n\r\n  drawPoint(x, y);\r\n  points.push({ x, y });\r\n}\r\n\r\nfunction drawPoint(x, y) {\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, pointSize, 0, Math.PI * 2, true);\r\n\r\n  ctx.fillStyle = \"#4E9AF1\";\r\n  ctx.fill();\r\n\r\n  ctx.strokeStyle = \"#000000\";\r\n  ctx.lineWidth = 2;\r\n  ctx.stroke();\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawLine(a, b) {\r\n  ctx.save();\r\n\r\n  ctx.beginPath();\r\n  ctx.moveTo(a.x, a.y);\r\n  ctx.lineTo(b.x, b.y);\r\n  ctx.lineWidth = 2;\r\n  ctx.stroke();\r\n  ctx.restore();\r\n\r\n  points.forEach((p) => drawPoint(p.x, p.y));\r\n}\r\n\r\nfunction drawLabel(text, p1, p2, padding) {\r\n  if (p1.x > p2.x) {\r\n    let t = p1;\r\n    p1 = p2;\r\n    p2 = t;\r\n  }\r\n\r\n  let alignment = 'center';\r\n  let dx = p2.x - p1.x;\r\n  let dy = p2.y - p1.y;\r\n  let p = p1;\r\n  let pad = 1 / 2;\r\n\r\n  ctx.save();\r\n  ctx.textAlign = alignment;\r\n  ctx.fillStyle = '#0E0A19';\r\n  ctx.font = 'bold 17px Arial';\r\n  ctx.translate(p.x + dx * pad, p.y + dy * pad);\r\n  ctx.rotate(Math.atan2(dy, dx));\r\n  ctx.fillText(text, 0, 0);\r\n  ctx.restore();\r\n}\r\n\r\nfunction highlightPoint(x, y, color) {\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, pointSize, 0, Math.PI * 2, true);\r\n\r\n  ctx.fillStyle = \"#0000ff\";\r\n  ctx.fill();\r\n\r\n  ctx.strokeStyle = color;\r\n  ctx.lineWidth = 3;\r\n  ctx.stroke();\r\n  ctx.restore();\r\n}\r\n\r\nfunction highlightRect(x, y, width, height, color) {\r\n  ctx.save();\r\n  ctx.fillStyle = color;\r\n  ctx.fillRect(x, y, width, height);\r\n  ctx.strokeRect(x, y, width, height);\r\n  ctx.restore();\r\n  points.forEach((p) => drawPoint(p.x, p.y));\r\n}\r\n\r\nfunction clearCanvas() {\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  points = [];\r\n  eventIndex = 0;\r\n  console.log('evo me');\r\n  nextButton.style.display = 'none';\r\n  backButton.style.display = 'none';\r\n}\r\n\r\nfunction next() {\r\n  if (eventIndex < events.length - 1) {\r\n    if (eventIndex >= 0) {\r\n      let event = events[eventIndex];\r\n      if (event.type == 'highlightRect') {\r\n        highlightRect(event.x, event.y, event.width, event.height, '#C7C4C0');\r\n      } else if (event.type == 'highlightPoints') {\r\n        highlightPoint(event.pointA.x, event.pointA.y, '#00000');\r\n        highlightPoint(event.pointB.x, event.pointB.y, '#00000');\r\n      }\r\n    }\r\n\r\n    eventIndex++;\r\n    let event = events[eventIndex];\r\n    if (event.type == 'highlightRect') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n    } else if (event.type == 'drawLine') {\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n      //console.log('label = ' + event.label);\r\n    } else if (event.type == 'highlightPoints') {\r\n      highlightPoint(event.pointA.x, event.pointA.y, '#ff0000');\r\n      highlightPoint(event.pointB.x, event.pointB.y, '#ff0000');\r\n    } else if (event.type == 'combine') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightStrip') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#4CAF50');\r\n      drawLine(event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightResult') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightLeftRight') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n      drawLine(event.pointLeftA, event.pointLeftB);\r\n      drawLabel(event.labelLeft, event.pointLeftA, event.pointLeftB);\r\n      drawLine(event.pointRightA, event.pointRightB);\r\n      drawLabel(event.labelRight, event.pointRightA, event.pointRightB);\r\n    } else if (event.type == 'highlightFinish') {\r\n      highlightRect(0, 0, 1024, 530, '#C7C4C0');\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    }\r\n  }\r\n}\r\n\r\nfunction back() {\r\n  if (eventIndex > 0) {\r\n    eventIndex--;\r\n    let event = events[eventIndex];\r\n    if (event.type == 'highlightRect') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#' + Math.floor(Math.random() * 16777215).toString(16));\r\n    } else if (event.type == 'highlightRect') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#f8f5f0');\r\n    } else if (event.type == 'drawLine') {\r\n      drawLine(event.pointA, event.pointB);\r\n    }\r\n  }\r\n}\r\n\r\nfunction start() {\r\n  let closestPoints = new ClosestPoints();\r\n  let result = closestPoints.divideAndConquer(points);\r\n  events = result.events;\r\n  nextButton.style.display = 'inline';\r\n  backButton.style.display = 'inline';\r\n}\r\n\r\ncanvas.addEventListener('click', drawOnClick);\r\nclearButton.addEventListener('click', clearCanvas);\r\nnextButton.addEventListener('click', next);\r\nbackButton.addEventListener('click', back);\r\nstartButton.addEventListener('click', start);"]}