{"version":3,"sources":["js/closest-points.js","js/closest-points-pure.js","js/index.js"],"names":["ClosestPoints","points","minDistance","Number","MAX_VALUE","pointA","pointB","i","length","j","distance","_getDistance","events","sort","a","b","x","pointsOrderedByX","slice","y","pointsOrderedByY","result","_closestPair","push","type","width","height","bruteResult","bruteForce","label","middleIndex","Math","floor","middlePoint","leftPoints","rightPoints","leftResult","minDistanceLeft","rightResult","minDistanceRight","pointLeftA","pointLeftB","labelLeft","pointRightA","pointRightB","labelRight","combinedResult","strip","point","abs","max","min","stripResult","_getMinimumDistanceStrip","totalResult","first","second","sqrt","pow","d","test","closestPoints","ClosestPointsTest","smallArray","console","log","divideAndConquer","mediumArray","Array","from","random","bigArray","largeArray","canvas","document","getElementById","ctx","getContext","pointSize","clearButton","nextButton","backButton","startButton","eventIndex","closestDistance","drawOnClick","event","rect","getBoundingClientRect","clientX","left","clientY","top","drawPoint","save","beginPath","arc","PI","fillStyle","fill","strokeStyle","lineWidth","stroke","restore","drawLine","moveTo","lineTo","forEach","p","drawLabel","text","p1","p2","padding","t","alignment","dx","dy","pad","textAlign","font","translate","rotate","atan2","fillText","highlightPoint","color","highlightRect","fillRect","strokeRect","clearCanvas","clearRect","style","display","next","backgroundColor","disabled","back","start","addEventListener"],"mappings":"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","file":"js.00a46daa.map","sourceRoot":"..","sourcesContent":["export default class ClosestPoints {\r\n\r\n  constructor() { }\r\n\r\n  bruteForce(points) {\r\n    let minDistance = Number.MAX_VALUE;\r\n    let pointA, pointB;\r\n\r\n    for (let i = 0; i < points.length; i++) {\r\n      for (let j = i + 1; j < points.length; j++) {\r\n        let distance = this._getDistance(points[i], points[j]);\r\n        if (distance < minDistance) {\r\n          minDistance = distance;\r\n          pointA = points[i];\r\n          pointB = points[j];\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      distance: minDistance,\r\n      pointA,\r\n      pointB\r\n    };\r\n  }\r\n\r\n  divideAndConquer(points) {\r\n    this.events = []\r\n    this.points = points;\r\n\r\n    points.sort((a, b) => a.x - b.x);\r\n    this.pointsOrderedByX = points.slice();\r\n\r\n    points.sort((a, b) => a.y - b.y);\r\n    this.pointsOrderedByY = points.slice();\r\n\r\n    let result = this._closestPair(this.pointsOrderedByX);\r\n    return {\r\n      distance: result.distance,\r\n      events: this.events\r\n    };\r\n  }\r\n\r\n  _closestPair(points) {\r\n    this.events.push({\r\n      type: 'highlightRect',\r\n      x: points[0].x - 6,\r\n      y: 0,\r\n      width: points[points.length - 1].x - points[0].x + 12,\r\n      height: 530\r\n    });\r\n\r\n    if (points.length <= 3) {\r\n      let bruteResult = this.bruteForce(points);\r\n      this.events.push({\r\n        type: 'drawLine',\r\n        pointA: bruteResult.pointA,\r\n        pointB: bruteResult.pointB,\r\n        label: 'd'\r\n      });\r\n      return bruteResult;\r\n    }\r\n\r\n    let middleIndex = Math.floor(points.length / 2);\r\n    let middlePoint = points[middleIndex];\r\n\r\n    let leftPoints = points.slice(0, middleIndex);\r\n    let rightPoints = points.slice(middleIndex);\r\n\r\n    let leftResult = this._closestPair(leftPoints);\r\n    let minDistanceLeft = leftResult.distance;\r\n\r\n    let rightResult = this._closestPair(rightPoints);\r\n    let minDistanceRight = rightResult.distance;\r\n\r\n    this.events.push({\r\n      type: 'highlightLeftRight',\r\n      x: points[0].x - 6,\r\n      y: 0,\r\n      width: points[points.length - 1].x - points[0].x + 12,\r\n      height: 530,\r\n      pointLeftA: leftResult.pointA,\r\n      pointLeftB: leftResult.pointB,\r\n      labelLeft: 'dl',\r\n      pointRightA: rightResult.pointA,\r\n      pointRightB: rightResult.pointB,\r\n      labelRight: 'dr'\r\n    });\r\n\r\n    let combinedResult = leftResult.distance < rightResult.distance ? leftResult : rightResult;\r\n\r\n    this.events.push({\r\n      type: 'combine',\r\n      x: points[0].x - 6,\r\n      y: 0,\r\n      width: points[points.length - 1].x - points[0].x + 12,\r\n      height: 530,\r\n      pointA: combinedResult.pointA,\r\n      pointB: combinedResult.pointB,\r\n      label: 'd'\r\n    });\r\n\r\n    let strip = [];\r\n    for (let i = 0; i < points.length; i++) {\r\n      let point = points[i];\r\n      if (Math.abs(point.x - middlePoint.x) <= combinedResult.distance && point.x >= points[0].x && point.x <= points[points.length - 1].x) {\r\n        strip.push(point);\r\n      }\r\n    }\r\n\r\n    this.events.push({\r\n      type: 'highlightStrip',\r\n      x: Math.max(points[0].x - 6, middlePoint.x - combinedResult.distance - 6),\r\n      y: 0,\r\n      width: Math.min(points[points.length - 1].x - Math.max(points[0].x, middlePoint.x - combinedResult.distance - 6), 2 * combinedResult.distance + 12),\r\n      height: 530,\r\n      pointA: combinedResult.pointA,\r\n      pointB: combinedResult.pointB\r\n    });\r\n\r\n    let stripResult = this._getMinimumDistanceStrip(strip, combinedResult.distance);\r\n    let totalResult = stripResult.distance < combinedResult.distance ? stripResult : combinedResult;\r\n\r\n    this.events.push({\r\n      type: (points.length == this.points.length ? 'highlightFinish' : 'highlightResult'),\r\n      x: points[0].x - 6,\r\n      y: 0,\r\n      width: points[points.length - 1].x - points[0].x + 12,\r\n      height: 530,\r\n      pointA: totalResult.pointA,\r\n      pointB: totalResult.pointB,\r\n      label: 'd'\r\n    });\r\n    return totalResult;\r\n  }\r\n\r\n  _getDistance(first, second) {\r\n    return Math.sqrt(Math.pow(first.x - second.x, 2) + Math.pow(first.y - second.y, 2));\r\n  }\r\n\r\n  _getMinimumDistanceStrip(strip, d) {\r\n    let minDistance = d;\r\n    let pointA, pointB;\r\n    for (let i = 0; i < strip.length; i++) {\r\n      for (let j = i + 1; j < strip.length && (strip[j].y - strip[i].y) < d; j++) {\r\n        if (this._getDistance(strip[i], strip[j]) < minDistance) {\r\n          minDistance = this._getDistance(strip[i], strip[j]);\r\n          pointA = strip[i];\r\n          pointB = strip[j];\r\n        }\r\n        this.events.push({\r\n          type: 'highlightPoints',\r\n          pointA: strip[i],\r\n          pointB: strip[j]\r\n        });\r\n      }\r\n    }\r\n    return {\r\n      distance: minDistance,\r\n      pointA,\r\n      pointB\r\n    };\r\n  }\r\n}\r\n","export default class ClosestPoints {\r\n\r\n  constructor() { }\r\n\r\n  bruteForce(points) {\r\n    let minDistance = Number.MAX_VALUE;\r\n    let pointA, pointB;\r\n\r\n    for (let i = 0; i < points.length; i++) {\r\n      for (let j = i + 1; j < points.length; j++) {\r\n        let distance = this._getDistance(points[i], points[j]);\r\n        if (distance < minDistance) {\r\n          minDistance = distance;\r\n          pointA = points[i];\r\n          pointB = points[j];\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      distance: minDistance,\r\n      pointA,\r\n      pointB\r\n    };\r\n  }\r\n\r\n  divideAndConquer(points) {\r\n    this.points = points;\r\n\r\n    points.sort((a, b) => a.x - b.x);\r\n    this.pointsOrderedByX = points.slice();\r\n\r\n    points.sort((a, b) => a.y - b.y);\r\n    this.pointsOrderedByY = points.slice();\r\n\r\n    let result = this._closestPair(this.pointsOrderedByX);\r\n    return {\r\n      distance: result.distance,\r\n      pointA: result.pointA,\r\n      pointB: result.pointB\r\n    };\r\n  }\r\n\r\n  _closestPair(points) {\r\n    if (points.length <= 3) {\r\n      let bruteResult = this.bruteForce(points);\r\n      return bruteResult;\r\n    }\r\n\r\n    let middleIndex = Math.floor(points.length / 2);\r\n    let middlePoint = points[middleIndex];\r\n\r\n    let leftPoints = points.slice(0, middleIndex);\r\n    let rightPoints = points.slice(middleIndex);\r\n\r\n    let leftResult = this._closestPair(leftPoints);\r\n    let rightResult = this._closestPair(rightPoints);\r\n    let combinedResult = leftResult.distance < rightResult.distance ? leftResult : rightResult;\r\n\r\n    let strip = [];\r\n    for (let i = 0; i < points.length; i++) {\r\n      let point = points[i];\r\n      if (Math.abs(point.x - middlePoint.x) <= combinedResult.distance && point.x >= points[0].x && point.x <= points[points.length - 1].x) {\r\n        strip.push(point);\r\n      }\r\n    }\r\n\r\n    let stripResult = this._getMinimumDistanceStrip(strip, combinedResult.distance);\r\n    let totalResult = stripResult.distance < combinedResult.distance ? stripResult : combinedResult;\r\n\r\n    return totalResult;\r\n  }\r\n\r\n  _getDistance(first, second) {\r\n    return Math.sqrt(Math.pow(first.x - second.x, 2) + Math.pow(first.y - second.y, 2));\r\n  }\r\n\r\n  _getMinimumDistanceStrip(strip, d) {\r\n    let minDistance = d;\r\n    let pointA, pointB;\r\n    for (let i = 0; i < strip.length; i++) {\r\n      for (let j = i + 1; j < strip.length && (strip[j].y - strip[i].y) < d; j++) {\r\n        if (this._getDistance(strip[i], strip[j]) < minDistance) {\r\n          minDistance = this._getDistance(strip[i], strip[j]);\r\n          pointA = strip[i];\r\n          pointB = strip[j];\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      distance: minDistance,\r\n      pointA,\r\n      pointB\r\n    };\r\n  }\r\n}\r\n","'use strict';\r\n\r\nimport ClosestPoints from './closest-points';\r\n\r\nimport ClosestPointsTest from './closest-points-pure';\r\n\r\n\r\nfunction test() {\r\n  const closestPoints = new ClosestPointsTest();\r\n\r\n  const smallArray = [{ x: 2, y: 3 }, { x: 12, y: 30 }, { x: 40, y: 50 }, { x: 5, y: 1 }, { x: 12, y: 10 }, { x: 3, y: 4 }];\r\n  console.log('Small test:')\r\n  console.log(closestPoints.divideAndConquer(smallArray));\r\n  console.log(closestPoints.bruteForce(smallArray));\r\n\r\n  const mediumArray = Array.from({ length: 100 }, () => {\r\n    return {\r\n      x: Math.floor(Math.random() * 500),\r\n      y: Math.floor(Math.random() * 500)\r\n    };\r\n  });\r\n  console.log('Medium test:')\r\n  console.log(closestPoints.divideAndConquer(mediumArray));\r\n  console.log(closestPoints.bruteForce(mediumArray));\r\n\r\n  const bigArray = Array.from({ length: 10000 }, () => {\r\n    return {\r\n      x: Math.floor(Math.random() * 50000),\r\n      y: Math.floor(Math.random() * 50000)\r\n    };\r\n  });\r\n  console.log('Big test:')\r\n  console.log(closestPoints.divideAndConquer(bigArray));\r\n  console.log(closestPoints.bruteForce(bigArray));\r\n\r\n  const largeArray = Array.from({ length: 100000 }, () => {\r\n    return {\r\n      x: Math.random() * 500000,\r\n      y: Math.random() * 500000\r\n    };\r\n  });\r\n  console.log('Large test:')\r\n  console.log(closestPoints.divideAndConquer(largeArray));\r\n  console.log(closestPoints.bruteForce(largeArray));\r\n}\r\n\r\n// test();\r\n\r\n\r\n// Drawing\r\nconst canvas = document.getElementById('canvas');\r\nconst ctx = canvas.getContext('2d');\r\nconst pointSize = 7;\r\n\r\nconst clearButton = document.getElementById('clear');\r\nconst nextButton = document.getElementById('next');\r\nconst backButton = document.getElementById('back');\r\nconst startButton = document.getElementById('start');\r\n\r\nlet points = [];\r\nlet eventIndex = -1;\r\nlet events = [];\r\nlet closestDistance = 0;\r\n\r\nfunction drawOnClick(event) {\r\n  const rect = canvas.getBoundingClientRect();\r\n  const x = event.clientX - rect.left;\r\n  const y = event.clientY - rect.top;\r\n\r\n  drawPoint(x, y);\r\n  points.push({ x, y });\r\n}\r\n\r\nfunction drawPoint(x, y) {\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, pointSize, 0, Math.PI * 2, true);\r\n\r\n  ctx.fillStyle = \"#4E9AF1\";\r\n  ctx.fill();\r\n\r\n  ctx.strokeStyle = \"#000000\";\r\n  ctx.lineWidth = 2;\r\n  ctx.stroke();\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawLine(a, b) {\r\n  ctx.save();\r\n\r\n  ctx.beginPath();\r\n  ctx.moveTo(a.x, a.y);\r\n  ctx.lineTo(b.x, b.y);\r\n  ctx.lineWidth = 2;\r\n  ctx.stroke();\r\n  ctx.restore();\r\n\r\n  points.forEach((p) => drawPoint(p.x, p.y));\r\n}\r\n\r\nfunction drawLabel(text, p1, p2, padding) {\r\n  if (p1.x > p2.x) {\r\n    let t = p1;\r\n    p1 = p2;\r\n    p2 = t;\r\n  }\r\n\r\n  let alignment = 'center';\r\n  let dx = p2.x - p1.x;\r\n  let dy = p2.y - p1.y;\r\n  let p = p1;\r\n  let pad = 1 / 2;\r\n\r\n  ctx.save();\r\n  ctx.textAlign = alignment;\r\n  ctx.fillStyle = '#0E0A19';\r\n  ctx.font = 'bold 17px Arial';\r\n  ctx.translate(p.x + dx * pad, p.y + dy * pad);\r\n  ctx.rotate(Math.atan2(dy, dx));\r\n  ctx.fillText(text, 0, 0);\r\n  ctx.restore();\r\n}\r\n\r\nfunction highlightPoint(x, y, color) {\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, pointSize, 0, Math.PI * 2, true);\r\n\r\n  ctx.fillStyle = \"#0000ff\";\r\n  ctx.fill();\r\n\r\n  ctx.strokeStyle = color;\r\n  ctx.lineWidth = 3;\r\n  ctx.stroke();\r\n  ctx.restore();\r\n}\r\n\r\nfunction highlightRect(x, y, width, height, color) {\r\n  ctx.save();\r\n  ctx.fillStyle = color;\r\n  ctx.fillRect(x, y, width, height);\r\n  ctx.strokeRect(x, y, width, height);\r\n  ctx.restore();\r\n  points.forEach((p) => drawPoint(p.x, p.y));\r\n}\r\n\r\nfunction clearCanvas() {\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  points = [];\r\n  eventIndex = 0;\r\n  nextButton.style.display = 'none';\r\n  backButton.style.display = 'none';\r\n}\r\n\r\nfunction next() {\r\n  if (eventIndex < events.length - 1) {\r\n    if (eventIndex >= 0) {\r\n      let event = events[eventIndex];\r\n      if (event.type == 'highlightRect') {\r\n        highlightRect(event.x, event.y, event.width, event.height, '#C7C4C0');\r\n      } else if (event.type == 'highlightPoints') {\r\n        highlightPoint(event.pointA.x, event.pointA.y, '#00000');\r\n        highlightPoint(event.pointB.x, event.pointB.y, '#00000');\r\n      }\r\n    } else {\r\n      backButton.style.backgroundColor = '#4e9af1';\r\n      backButton.disabled = false;\r\n    }\r\n\r\n    eventIndex++;\r\n    let event = events[eventIndex];\r\n    if (event.type == 'highlightRect') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n    } else if (event.type == 'drawLine') {\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightPoints') {\r\n      highlightPoint(event.pointA.x, event.pointA.y, '#ff0000');\r\n      highlightPoint(event.pointB.x, event.pointB.y, '#ff0000');\r\n    } else if (event.type == 'combine') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightStrip') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#4CAF50');\r\n      drawLine(event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightResult') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightLeftRight') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n      drawLine(event.pointLeftA, event.pointLeftB);\r\n      drawLabel(event.labelLeft, event.pointLeftA, event.pointLeftB);\r\n      drawLine(event.pointRightA, event.pointRightB);\r\n      drawLabel(event.labelRight, event.pointRightA, event.pointRightB);\r\n    } else if (event.type == 'highlightFinish') {\r\n      highlightRect(0, 0, 1024, 530, '#C7C4C0');\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    }\r\n  }\r\n\r\n  if (eventIndex == events.length - 1) {\r\n    nextButton.disabled = true;\r\n    nextButton.style.backgroundColor = 'gray';\r\n    eventIndex++;\r\n  }\r\n}\r\n\r\nfunction back() {\r\n  if (eventIndex > 0) {\r\n    if (eventIndex < events.length) {\r\n      let event = events[eventIndex];\r\n      if (event.type == 'highlightRect') {\r\n        highlightRect(event.x, event.y, event.width, event.height, '#C7C4C0');\r\n      } else if (event.type == 'highlightPoints') {\r\n        highlightPoint(event.pointA.x, event.pointA.y, '#00000');\r\n        highlightPoint(event.pointB.x, event.pointB.y, '#00000');\r\n      }\r\n    } else {\r\n      nextButton.style.backgroundColor = '#4e9af1';\r\n      nextButton.disabled = false;\r\n    }\r\n\r\n    eventIndex--;\r\n    let event = events[eventIndex];\r\n    if (event.type == 'highlightRect') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n    } else if (event.type == 'drawLine') {\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightPoints') {\r\n      highlightPoint(event.pointA.x, event.pointA.y, '#ff0000');\r\n      highlightPoint(event.pointB.x, event.pointB.y, '#ff0000');\r\n    } else if (event.type == 'combine') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightStrip') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#4CAF50');\r\n      drawLine(event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightResult') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    } else if (event.type == 'highlightLeftRight') {\r\n      highlightRect(event.x, event.y, event.width, event.height, '#fef36f');\r\n      drawLine(event.pointLeftA, event.pointLeftB);\r\n      drawLabel(event.labelLeft, event.pointLeftA, event.pointLeftB);\r\n      drawLine(event.pointRightA, event.pointRightB);\r\n      drawLabel(event.labelRight, event.pointRightA, event.pointRightB);\r\n    } else if (event.type == 'highlightFinish') {\r\n      highlightRect(0, 0, 1024, 530, '#C7C4C0');\r\n      drawLine(event.pointA, event.pointB);\r\n      drawLabel(event.label, event.pointA, event.pointB);\r\n    }\r\n  } else {\r\n    backButton.disabled = true;\r\n    backButton.style.backgroundColor = 'gray';\r\n  }\r\n}\r\n\r\nfunction start() {\r\n  eventIndex = -1\r\n  events = [];\r\n  let closestPoints = new ClosestPoints();\r\n  let result = closestPoints.divideAndConquer(points);\r\n  closestDistance = result.distance;\r\n  events = result.events;\r\n\r\n  nextButton.style.display = 'inline';\r\n  backButton.style.display = 'inline';\r\n  backButton.disabled = true;\r\n  backButton.style.backgroundColor = 'gray';\r\n  nextButton.style.backgroundColor = '#4e9af1';\r\n  nextButton.disabled = false;\r\n}\r\n\r\ncanvas.addEventListener('click', drawOnClick);\r\nclearButton.addEventListener('click', clearCanvas);\r\nnextButton.addEventListener('click', next);\r\nbackButton.addEventListener('click', back);\r\nstartButton.addEventListener('click', start);\r\n\r\n\r\n"]}